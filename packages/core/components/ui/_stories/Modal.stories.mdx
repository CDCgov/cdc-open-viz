import { Canvas, Meta, Story, ArgsTable } from '@storybook/blocks';

import useGlobalStore from '../../../store/global/globalSlice'

import Button from '../../element/Button'
import Modal from '../Modal'
import Overlay from '../Overlay'

<Meta
  title="Components/UI/Modal"
  component={Modal}
  argTypes={{
    header: {
      table: {
        disable: true,
      },
    },
    content: {
      table: {
        disable: true,
      },
    },
    footer: {
      table: {
        disable: true,
      },
    },
    fontTheme: {
      options: [ 'light', 'dark' ],
      control: { type: 'radio' }
    },
    headerBgColor: {
      control: { type: 'color' }
    },
    showDividerTop: {
      control: {
        type: 'boolean'
      }
    },
    showDividerBottom: {
      control: {
        type: 'boolean'
      }
    },
    showClose: {
      control: {
        type: 'boolean'
      }
    }
  }}
/>

export const Template = ({ header, content, footer, ...args }) => (
  <Modal {...args} >
    <Modal.Header>
      {header}
    </Modal.Header>
    <Modal.Content>
      {content}
    </Modal.Content>
    <Modal.Footer>
      {footer}
    </Modal.Footer>
  </Modal>
)

# Modal Component
Use the modal component to display content intended to be informative, but temporary. The content
displayed is usually interactive, often requiring some type of confirmation - or input - from the user.

<br/>

<Story name="Default"
       args={{
         header: <>Default Modal Style</>,
         content: <>This is a modal that uses the default styles, and does not include any customization options.</>,
         footer: <Button onClick={(e) => e.preventDefault()}>Trigger an Action</Button>,
         fontTheme: 'dark',
         headerBgColor: '#fff',
         showDividerTop: true,
         showDividerBottom: true,
         showClose: true
       }}>
  {Template.bind({})}
</Story>

<ArgsTable story="Default"/>

## Usage Examples
Modals can be customized to fix various display requirements, depending on the situation. Below are a few examples highlighting various potential use cases.

### Interaction
<Canvas>
  <Story name="Interaction">
    {() => {
      const openOverlay = useGlobalStore(state => state.openOverlay)

      return <>
        <Button onClick={() => openOverlay(<Modal fontTheme={'light'} headerBgColor={'#824c88'}>
          <Modal.Header>
            Example Modal
          </Modal.Header>
          <Modal.Content>
            <p>This is a popup modal with general information. This serves as an example of how interaction with the
              modal is intended to work.</p>
          </Modal.Content>
        </Modal>)}>
          Trigger Modal Open
        </Button>
      </>
    }}
  </Story>
</Canvas>

<br/>

### Background Close Disabled
<Canvas>
  <Story name="BgCloseDisabled">
    {() => {
      const openOverlay = useGlobalStore(state => state.openOverlay)

      return <>
        <Button onClick={() => openOverlay(<Modal fontTheme={'light'} headerBgColor={'#824c88'}>
          <Modal.Header>
            Example Modal
          </Modal.Header>
          <Modal.Content>
            <p>This is a popup modal with general information. This serves as an example of how interaction with the
              modal is intended to work.</p>
          </Modal.Content>
        </Modal>, true)}>
          Trigger Locked Modal
        </Button>
      </>
    }}
  </Story>
</Canvas>

<br/>

### Example #1
<Canvas withSource="open">
  <Story name="Example #1">
    <Modal fontTheme={'light'} headerBgColor={'#d9006e'}>
      <Modal.Content>
        <p>This is a modal that contains a close button and content, but has no header or footer.</p>
      </Modal.Content>
    </Modal>
  </Story>
</Canvas>

<br/>

### Example #2
<Canvas withSource="open">
  <Story name="Example #2">
    <Modal fontTheme={'light'} headerBgColor={'#363955'} showDividerBottom={false}>
      <Modal.Header>
        General Information Modal
      </Modal.Header>
      <Modal.Content>
        <p>This is a modal with some general information. Anything can go here, to provide details or explain
          information further. The modal can contain as much information as needed, in order to provide the proper
          context for the content.</p>
      </Modal.Content>
      <Modal.Footer>
        <sub><em>Last updated 01/02/34</em></sub>
      </Modal.Footer>
    </Modal>
  </Story>
</Canvas>

<br/>

### Example #3
<Canvas withSource="open">
  <Story name="Example #3">
    <Modal fontTheme={'light'} headerBgColor={'#d73636'} showClose={false}>
      <Modal.Header>
        <center>Warning Modal</center>
      </Modal.Header>
      <Modal.Content>
        <center>
          <p>Making these changes will perform an irreversible action.</p>
          <p>No close button is provided; you are required to make a selection below.</p>
        </center>
      </Modal.Content>
      <Modal.Footer>
        <div style={{ textAlign: 'center' }}>
          <p style={{ marginBottom: '1rem', fontSize: '1rem' }}>Are you sure you want to continue?</p>
        </div>
        <div style={{ textAlign: 'center' }}>
          <Button className="warn" onClick={(e) => e.preventDefault()}>No, Cancel</Button>
          <Button className="success" onClick={(e) => e.preventDefault()}>Yes, Continue</Button>
        </div>
      </Modal.Footer>
    </Modal>
  </Story>
</Canvas>

<Overlay/>
