import{a as L,F as W,j as V}from"./jsx-runtime-670450c2.js";import{r as a}from"./index-f1f749bf.js";import{p as u}from"./index-4d501b15.js";import{u as D}from"./useVisConfig-4fe3448c.js";import{g as N}from"./visConfigSlice-bf7622bc.js";import{L as B}from"./Label-e733889d.js";/* empty css              */function M(t,r,c){var g=this,o=a.useRef(null),l=a.useRef(0),i=a.useRef(null),s=a.useRef([]),f=a.useRef(),p=a.useRef(),k=a.useRef(t),y=a.useRef(!0);k.current=t;var q=!r&&r!==0&&typeof window<"u";if(typeof t!="function")throw new TypeError("Expected a function");r=+r||0,c=c||{};var E=!!c.leading,d="trailing"in c?!!c.trailing:!0,m="maxWait"in c,x=m?Math.max(+c.maxWait||0,r):null;a.useEffect(function(){return y.current=!0,function(){y.current=!1}},[]);var R=a.useMemo(function(){var v=function(e){var n=s.current,b=f.current;return s.current=f.current=null,l.current=e,p.current=k.current.apply(b,n)},h=function(e,n){q&&cancelAnimationFrame(i.current),i.current=q?requestAnimationFrame(e):setTimeout(e,n)},F=function(e){if(!y.current)return!1;var n=e-o.current,b=e-l.current;return!o.current||n>=r||n<0||m&&b>=x},I=function(e){return i.current=null,d&&s.current?v(e):(s.current=f.current=null,p.current)},C=function(){var e=Date.now();if(F(e))return I(e);if(y.current){var n=e-o.current,b=e-l.current,S=r-n,j=m?Math.min(S,x-b):S;h(C,j)}},T=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var b=Date.now(),S=F(b);if(s.current=e,f.current=g,o.current=b,S){if(!i.current&&y.current)return l.current=o.current,h(C,r),E?v(o.current):p.current;if(m)return h(C,r),v(o.current)}return i.current||h(C,r),p.current};return T.cancel=function(){i.current&&(q?cancelAnimationFrame(i.current):clearTimeout(i.current)),l.current=0,s.current=o.current=f.current=i.current=null},T.isPending=function(){return!!i.current},T.flush=function(){return i.current?I(Date.now()):p.current},T},[E,m,r,x,d,q]);return R}function P(t,r){return t===r}function A(t){return typeof t=="function"?function(){return t}:t}function $(t){var r=a.useState(A(t)),c=r[0],g=r[1],o=a.useCallback(function(l){return g(A(l))},[]);return[c,o]}function _(t,r,c){var g=c&&c.equalityFn||P,o=$(t),l=o[0],i=o[1],s=M(a.useCallback(function(p){return i(p)},[i]),r,c),f=a.useRef(t);return a.useEffect(function(){g(f.current,t)||(s(t),f.current=t)},[t,s,g]),[l,{cancel:s.cancel,isPending:s.isPending,flush:s.flush}]}const O=({label:t,type:r="text",tooltip:c,placeholder:g,required:o,configField:l,value:i,min:s,max:f,className:p,onChange:k,...y})=>{const{config:q,updateVisConfigField:E}=D(),[d,m]=a.useState(),[x]=_(d,300),R=a.useRef(null),v=l&&N(l,q),h=Boolean(v&&typeof v!==void 0);a.useEffect(()=>(h?v!==d&&m(v):m(i),()=>{}),[h]),a.useEffect(()=>(l&&v!==x&&E(l,x),()=>{}),[l,x,E]);const F=e=>{let n=!1;return e===""&&(n=!0),s||f?(s&&parseFloat(e)>=parseFloat(s)&&(n=!0),f&&parseFloat(e)<=parseFloat(f)&&(n=!0)):n=!0,n},I=e=>{switch(r){case"number":F(e.target.value)?m(e.target.value):m(d);break;default:m(e.target.value)}k&&(console.log(e),k(e))};let C={className:`cove-input${r==="textarea"?" cove-input--textarea":""}${o&&(d===void 0||d==="")?" cove-input--error":""}${p?" "+p:""}`,type:r,placeholder:g,onChange:e=>I(e),...y},T=r==="textarea"?V("textarea",{...C,ref:R,value:d??""}):V("input",{...C,value:d??"",ref:R});return L(W,{children:[t&&V(B,{tooltip:c,onClick:()=>R.current.focus(),children:t}),T]})};O.propTypes={label:u.string,type:u.oneOf(["text","search","textarea","number","date"]),value:u.oneOfType([u.string,u.number]),tooltip:u.oneOfType([u.object,u.string]),placeholder:u.string,min:u.oneOfType([u.number,u.string]),max:u.oneOfType([u.number,u.string]),section:u.string,subsection:u.string,fieldName:u.string,updateConfigField:u.func};O.__docgenInfo={description:"",methods:[],displayName:"InputText",props:{type:{defaultValue:{value:"'text'",computed:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'search'",computed:!1},{value:"'textarea'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1}]},required:!1,description:""},label:{type:{name:"string"},required:!1,description:""},value:{type:{name:"union",value:[{name:"string"},{name:"number"}]},required:!1,description:""},tooltip:{type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1,description:""},placeholder:{type:{name:"string"},required:!1,description:""},min:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:""},max:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:""},section:{type:{name:"string"},required:!1,description:""},subsection:{type:{name:"string"},required:!1,description:""},fieldName:{type:{name:"string"},required:!1,description:""},updateConfigField:{type:{name:"func"},required:!1,description:""}}};export{O as I};
//# sourceMappingURL=InputText-986413de.js.map
