import{a as j,F as L,j as A}from"./jsx-runtime-670450c2.js";import{r as u}from"./index-f1f749bf.js";import{p as a}from"./index-4d501b15.js";import{u as W}from"./useVisConfig-ed2d617d.js";import{g as D}from"./store-4dc22f46.js";import{L as M}from"./Label-a6b7661b.js";/* empty css              */function N(t,r,c){var g=this,s=u.useRef(null),l=u.useRef(0),i=u.useRef(null),o=u.useRef([]),f=u.useRef(),d=u.useRef(),C=u.useRef(t),y=u.useRef(!0);C.current=t;var k=!r&&r!==0&&typeof window<"u";if(typeof t!="function")throw new TypeError("Expected a function");r=+r||0,c=c||{};var F=!!c.leading,m="trailing"in c?!!c.trailing:!0,p="maxWait"in c,b=p?Math.max(+c.maxWait||0,r):null;u.useEffect(function(){return y.current=!0,function(){y.current=!1}},[]);var T=u.useMemo(function(){var v=function(e){var n=o.current,h=f.current;return o.current=f.current=null,l.current=e,d.current=C.current.apply(h,n)},x=function(e,n){k&&cancelAnimationFrame(i.current),i.current=k?requestAnimationFrame(e):setTimeout(e,n)},E=function(e){if(!y.current)return!1;var n=e-s.current,h=e-l.current;return!s.current||n>=r||n<0||p&&h>=b},R=function(e){return i.current=null,m&&o.current?v(e):(o.current=f.current=null,d.current)},S=function(){var e=Date.now();if(E(e))return R(e);if(y.current){var n=e-s.current,h=e-l.current,I=r-n,O=p?Math.min(I,b-h):I;x(S,O)}},q=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var h=Date.now(),I=E(h);if(o.current=e,f.current=g,s.current=h,I){if(!i.current&&y.current)return l.current=s.current,x(S,r),F?v(s.current):d.current;if(p)return x(S,r),v(s.current)}return i.current||x(S,r),d.current};return q.cancel=function(){i.current&&(k?cancelAnimationFrame(i.current):clearTimeout(i.current)),l.current=0,o.current=s.current=f.current=i.current=null},q.isPending=function(){return!!i.current},q.flush=function(){return i.current?R(Date.now()):d.current},q},[F,p,r,b,m,k]);return T}function P(t,r){return t===r}function V(t){return typeof t=="function"?function(){return t}:t}function B(t){var r=u.useState(V(t)),c=r[0],g=r[1],s=u.useCallback(function(l){return g(V(l))},[]);return[c,s]}function $(t,r,c){var g=c&&c.equalityFn||P,s=B(t),l=s[0],i=s[1],o=N(u.useCallback(function(d){return i(d)},[i]),r,c),f=u.useRef(t);return u.useEffect(function(){g(f.current,t)||(o(t),f.current=t)},[t,o,g]),[l,{cancel:o.cancel,isPending:o.isPending,flush:o.flush}]}const w=({label:t,type:r="text",tooltip:c,placeholder:g,required:s,configField:l,value:i,min:o,max:f,className:d,onChange:C,...y})=>{const{config:k,updateVisConfigField:F}=W(),[m,p]=u.useState(),[b]=$(m,300),T=u.useRef(null),v=l&&D(l,k),x=Boolean(v&&typeof v!==void 0);u.useEffect(()=>(x?v!==m&&p(v):p(i),()=>{}),[x]),u.useEffect(()=>(l&&v!==b&&F(l,b),()=>{}),[l,b,F]);const E=e=>{let n=!1;return e===""&&(n=!0),o||f?(o&&parseFloat(e)>=parseFloat(o)&&(n=!0),f&&parseFloat(e)<=parseFloat(f)&&(n=!0)):n=!0,n},R=e=>{switch(r){case"number":E(e.target.value)?p(e.target.value):p(m);break;default:p(e.target.value)}C&&(console.log(e),C(e))};let S={className:`cove-input${r==="textarea"?" cove-input--textarea":""}${s&&(m===void 0||m==="")?" cove-input--error":""}${d?" "+d:""}`,type:r,placeholder:g,onChange:e=>R(e),...y},q=r==="textarea"?A("textarea",{...S,ref:T,value:m??""}):A("input",{...S,value:m??"",ref:T});return j(L,{children:[t&&A(M,{tooltip:c,onClick:()=>T.current.focus(),children:t}),q]})};w.propTypes={label:a.string,type:a.oneOf(["text","textarea","number","date","search"]),tooltip:a.oneOfType([a.object,a.string]),placeholder:a.string,required:a.bool,configField:a.oneOfType([a.string,a.array]),min:a.oneOfType([a.number,a.string]),max:a.oneOfType([a.number,a.string]),className:a.string,onChange:a.func};w.__docgenInfo={description:"",methods:[],displayName:"InputText",props:{type:{defaultValue:{value:"'text'",computed:!1},type:{name:"enum",value:[{value:"'text'",computed:!1},{value:"'textarea'",computed:!1},{value:"'number'",computed:!1},{value:"'date'",computed:!1},{value:"'search'",computed:!1}]},required:!1,description:"Set the input type"},label:{type:{name:"string"},required:!1,description:"Add label to the input field"},tooltip:{type:{name:"union",value:[{name:"object"},{name:"string"}]},required:!1,description:"Add a tooltip to describe the input's usage; JSX markup can also be supplied"},placeholder:{type:{name:"string"},required:!1,description:"Placeholder text for the input field"},required:{type:{name:"bool"},required:!1,description:"Mark the input as required; will set error style while value is undefined"},configField:{type:{name:"union",value:[{name:"string"},{name:"array"}]},required:!1,description:"Supply a reference to the config key this input connects to, if any.<br/><br/>\n**String**<br/>\n`configField=\"title\"` will connect to the `config.title` value.<br/><br/>\n**Array**<br/>\n`configField={[ 'componentStyle', 'shadow' ]}` will connect to the `config.componentStyle.shadow` value. <br/><br/>\nSee [setConfigKeyValue](https://cdcgov.github.io/cdc-open-viz/?path=/docs/helpers-confighelpers-setconfigkeyvalue--docs) for more details."},min:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:"For `number` type, supply a minimum value allowed for the input"},max:{type:{name:"union",value:[{name:"number"},{name:"string"}]},required:!1,description:"For `number` type, supply a maximum value allowed for the input"},className:{type:{name:"string"},required:!1,description:"Additional class to add to the input wrapper"},onChange:{type:{name:"func"},required:!1,description:"Function to call when the input is changed"}}};export{w as I};
//# sourceMappingURL=InputText-4a90025a.js.map
