import{a as u,j as t,F as E}from"./jsx-runtime-670450c2.js";import{r as R,R as K}from"./index-f1f749bf.js";import{C as Ae}from"./Component-de08b741.js";import{C as Pe}from"./ConfigProxy-adf6c554.js";import{E as Re}from"./ErrorBoundary-d4835eb6.js";import{V as Ee}from"./View-05ac55e1.js";import{u as Se}from"./configStore-d2c2b356.js";import{A as y}from"./Accordion-a74fd660.js";import{B as Z}from"./Button-fe991509.js";import{I as _e}from"./InputCheckbox-300487db.js";import{I as h}from"./InputSelect-9a6c7749.js";import{C as Me,a as je,b as D,g as ee,c as ae,d as te,e as oe}from"./ColorPicker-7444e27e.js";import{I as g}from"./InputText-b32e4cdb.js";import{L as w}from"./Label-ecfa30b4.js";import{S as We}from"./SectionBlock-5e83800b.js";import{S as ne}from"./SectionWrapper-726b7eca.js";import{p as ie}from"./index-286867b9.js";import{p as b}from"./index-4d501b15.js";import"./_commonjsHelpers-042e6b4d.js";import"./globalStore-3225bb68.js";import"./middleware-8046ed8c.js";import"./Icon-11079a09.js";import"./Tooltip-ed90ab02.js";import"./SplashError-3dd55146.js";import"./Overlay-c95f963e.js";import"./index-96c5f47c.js";/* empty css             */import"./LoadSpin-9415b273.js";/* empty css              */const ze={title:"Waffle Chart",content:"",subtext:"",orientation:"horizontal",data:"",filters:[],fontSize:"",overallFontSize:"medium",dataColumn:"",dataFunction:"",dataConditionalColumn:"",dataConditionalOperator:"",dataConditionalComparate:"",invalidComparate:!1,customDenom:!1,dataDenom:"100",dataDenomColumn:"",dataDenomFunction:"",suffix:"%",roundToPlace:"0",shape:"circle",nodeWidth:"10",nodeSpacer:"2",theme:"blue",type:"waffle-chart",tooltip:"",visual:{border:"default",accent:"none",background:"default",shadow:!0}},re={default:"Default",theme:"Theme Color",none:"None"},we={none:"None",top:"Top",right:"Right",bottom:"Bottom",left:"Left"},Oe=()=>u(y.Section,{label:"Component",children:[t(g,{type:"text",configField:"tooltip",label:"Tooltip"}),t(h,{configField:["visual","border"],options:re,label:"Border"}),t(h,{configField:["visual","accent"],options:we,label:"Border Accent"}),t(h,{configField:["visual","background"],options:re,label:"Background Color"}),t(_e,{configField:["visual","shadow"],label:"Show Dropshadow"}),t(Me,{label:"Theme Color",tooltip:"Select the theme color for the component",colorTooltip:!0})]});Oe.__docgenInfo={description:"",methods:[],displayName:"EditorPanelGlobal"};const L="Count",k="Max",U="Mean (Average)",$="Median",B="Min",G="Mode",q="Sum",le=[L,k,U,$,B,G,q],Ie="<",Le=">",ke="<=",Ue=">=",$e="=",Be="≠",Ge=[Ie,Le,ke,Ue,$e,Be],De=()=>{const{config:a,setMissingRequiredSections:i,updateConfig:e}=Se();R.useEffect(()=>{i(!1)},[]),R.useEffect(()=>{let f=["<",">","<=",">="];a.dataConditionalComparate!==""?f.indexOf(a.dataConditionalOperator)>-1&&isNaN(a.dataConditionalComparate)?e({...a,invalidComparate:!0}):a.invalidComparate&&e({...a,invalidComparate:!1}):e({...a,invalidComparate:!1})},[a.dataConditionalOperator,a.dataConditionalComparate]);const n=()=>{let f=a.filters?[...a.filters]:[];f.push({values:[]}),e({...a,filters:f})},c=f=>{let r=[...a.filters];r.splice(f,1),e({...a,filters:r})},o=(f,r,d)=>{let l=[...a.filters];l[r][f]=d,e({...a,filters:l})},m=(f=!0)=>{let r={};return a.data.map(d=>Object.keys(d).forEach(l=>r[l]=!0)),Object.keys(r)},p=f=>{let r=[];const d=a.filters[f].columnName;return a.data&&d&&(a.data.forEach(function(l){l[d]!==void 0&&r.indexOf(l[d])===-1&&r.push(l[d])}),r.sort()),r},C=u(y.Section,{label:"General",children:[t(g,{label:"Title",placeholder:"Waffle Chart Title",configField:"title"}),t(g,{label:"Message",type:"textarea",configField:"content",tooltip:"Enter the message text for the visualization. The following HTML tags are supported: strong, em, sup, and sub."}),t(g,{label:"Subtext/Citation",placeholder:"Waffle Chart Subtext or Citation",configField:"subtext",tooltip:"Enter supporting text to display below the data visualization, if applicable. The following HTML tags are supported: strong, em, sup, and sub."})]}),N=u(y.Section,{label:"Data",children:[u(ne,{label:"Numerator",children:[t(h,{label:"Data Column",options:m(),configField:"dataColumn",initialDisabled:!0}),t(h,{label:"Data Function",options:le,configField:"dataFunction",initialDisabled:!0}),t(w,{children:"Data Conditional"}),u("div",{className:"cove-grid cove-grid--gap--2 mb-3",children:[t("div",{className:"cove-grid__col--4",children:t(h,{className:"mb-0",options:m(),configField:"dataConditionalColumn",initialDisabled:!0})}),t("div",{className:"cove-grid__col--4",children:t(h,{className:"mb-0",options:Ge,configField:"dataConditionalOperator",initialDisabled:!0})}),t("div",{className:"cove-grid__col--4",children:t(g,{className:"mb-0",configField:"dataConditionalComparate"})})]}),a.invalidComparate&&t("div",{className:"accordion__panel-error",children:"Non-numerical comparate values can only be used with = or ≠."})]}),u(ne,{label:"Denominator",children:[t(_e,{label:"Select from data",size:"small",configField:"customDenom"}),!a.customDenom&&u("div",{className:"cove-grid cove-grid--gap--2 mb-3",children:[t("div",{className:"cove-grid__col--6",children:t(g,{className:"mb-0",configField:"dataDenom"})}),t("div",{className:"cove-grid__col--6",children:t("small",{children:"default (100)"})})]}),a.customDenom&&u(E,{children:[t(h,{label:"Data Column",options:m(),configField:"dataDenomColumn"}),t(h,{label:"Data Function",options:le,configField:"dataDenomFunction"})]})]}),t("hr",{className:"cove-editor__divider"}),u("div",{className:"cove-grid cove-grid--gap--2 mb-3",children:[t("div",{className:"cove-grid__col--4",children:t(g,{label:"Prefix",className:"mb-0",configField:"prefix"})}),t("div",{className:"cove-grid__col--4",children:t(g,{label:"Suffix",className:"mb-0",configField:"suffix"})}),t("div",{className:"cove-grid__col--4",children:t(g,{label:"Round",className:"mb-0",type:"number",configField:"roundToPlace"})})]})]}),x=u(y.Section,{label:"Filters",children:[t(w,{tooltip:'To refine the highlighted data point, specify one or more filters (e.g., "Male" and "Female" for a column called "Sex").',children:"Data Point Filters"}),a.filters&&a.filters.map((f,r)=>u(We,{children:[t(Z,{className:"cove-button--remove",onClick:()=>{c(r)},children:"Remove"}),t(h,{label:"Column",options:m(),initial:"Select data column",onChange:d=>{o("columnName",r,d.target.value)},value:f.columnName}),t(h,{label:"Column Value",options:p(r),initial:"Select column value",onChange:d=>{o("columnValue",r,d.target.value)},value:f.columnValue,disabled:!a.filters[r].columnName})]},r)),(!a.filters||a.filters.length===0)&&t("p",{className:"my-2",style:{fontStyle:"italic",textAlign:"center"},children:"There are currently no filters."}),t(Z,{onClick:n,fluid:!0,children:"Add Filter"})]}),W=u(y.Section,{label:"Visual",children:[t(h,{label:"Shape",options:["circle","square","person"],configField:"shape"}),u("div",{className:"cove-grid cove-grid--gap--2 mb-3",children:[t("div",{className:"cove-grid__col--6",children:t(g,{label:"Width",className:"mb-0",type:"number",configField:"nodeWidth"})}),t("div",{className:"cove-grid__col--6",children:t(g,{label:"Spacer",className:"mb-0",type:"number",configField:"nodeSpacer"})})]}),t(h,{label:"Layout",options:["horizontal","vertical"],configField:"orientation"}),t(w,{tooltip:"Change the font size of the output value returned from the Data",children:"Data Value Font Size"}),u("div",{className:"cove-grid cove-grid--gap--2 mb-3",children:[t("div",{className:"cove-grid__col--6",children:t(g,{className:"mb-0",type:"number",configField:"fontSize"})}),t("div",{className:"cove-grid__col--6",style:{display:"flex",alignItems:"center"},children:t("small",{children:"default (50px)"})})]}),t(h,{label:"Overall Font Size",tooltip:"Change the overall font size of the entire component.",options:["small","medium","large"],configField:"overallFontSize"})]});return u(E,{children:[C,N,x,W,Oe()]})};De.__docgenInfo={description:"",methods:[],displayName:"EditorPanels"};var V={},qe={get exports(){return V},set exports(a){V=a}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(a){(function(){var i={}.hasOwnProperty;function e(){for(var n=[],c=0;c<arguments.length;c++){var o=arguments[c];if(o){var m=typeof o;if(m==="string"||m==="number")n.push(o);else if(Array.isArray(o)){if(o.length){var p=e.apply(null,o);p&&n.push(p)}}else if(m==="object"){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){n.push(o.toString());continue}for(var C in o)i.call(o,C)&&o[C]&&n.push(C)}}}return n.join(" ")}a.exports?(e.default=e,a.exports=e):window.classNames=e})()})(qe);const X=V;var Ve=["top","left","transform","className","children","innerRef"];function H(){return H=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},H.apply(this,arguments)}function He(a,i){if(a==null)return{};var e={},n=Object.keys(a),c,o;for(o=0;o<n.length;o++)c=n[o],!(i.indexOf(c)>=0)&&(e[c]=a[c]);return e}function xe(a){var i=a.top,e=i===void 0?0:i,n=a.left,c=n===void 0?0:n,o=a.transform,m=a.className,p=a.children,C=a.innerRef,N=He(a,Ve);return K.createElement("g",H({ref:C,className:X("visx-group",m),transform:o||"translate("+c+", "+e+")"},N),p)}xe.propTypes={top:b.number,left:b.number,transform:b.string,className:b.string,children:b.node,innerRef:b.oneOfType([b.string,b.func,b.object])};var Ye=["className","innerRef"];function Y(){return Y=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Y.apply(this,arguments)}function Qe(a,i){if(a==null)return{};var e={},n=Object.keys(a),c,o;for(o=0;o<n.length;o++)c=n[o],!(i.indexOf(c)>=0)&&(e[c]=a[c]);return e}function Ke(a){var i=a.className,e=a.innerRef,n=Qe(a,Ye);return K.createElement("rect",Y({ref:e,className:X("visx-bar",i)},n))}var Xe=["className","innerRef"];function Q(){return Q=Object.assign?Object.assign.bind():function(a){for(var i=1;i<arguments.length;i++){var e=arguments[i];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(a[n]=e[n])}return a},Q.apply(this,arguments)}function Je(a,i){if(a==null)return{};var e={},n=Object.keys(a),c,o;for(o=0;o<n.length;o++)c=n[o],!(i.indexOf(c)>=0)&&(e[c]=a[c]);return e}function Ze(a){var i=a.className,e=a.innerRef,n=Je(a,Xe);return K.createElement("circle",Q({ref:e,className:X("visx-circle",i)},n))}const ea=a=>{const i=R.useRef();return R.useEffect(()=>{i.current=a},[a]),i.current};function se(a,i,e,n,c){let o=i==="x"?9-e%10:i==="y"?Math.floor(e/10):null;return a==="circle"?o*(n+c)+n/2:o*(n+c)}const I=(a,i,e)=>{if(e){const c=Math.abs(i-e);if(e>i){let o="";const m=Math.abs(e-a-c);return a>i&&a<e&&(o="fill-opacity 200ms cubic-bezier(0.16, 1, 0.3, 1) "+(m*.0025).toString()+"s, "),o}if(e<i){let o="";const m=Math.abs(e-a);return a>=e&&a<i&&(o="fill-opacity 200ms cubic-bezier(0.16, 1, 0.3, 1) "+(Math.abs(c-m)*.0025).toString()+"s, "),o}}return""},ye=({configObj:a,configUrl:i})=>{const{config:e,missingRequiredSections:n}=Se(),c=()=>{if(!e.dataColumn||!e.dataFunction)return"";let r=e.data;e.filters.map(s=>(s.columnName&&s.columnValue&&(r=r.filter(function(O){return O[s.columnName]===s.columnValue})),!1));let d=[];if(e.dataConditionalColumn!==""&&e.dataConditionalOperator!==""&&e.dataConditionalComparate!=="")switch(e.dataConditionalOperator){case"<":d=r.filter(s=>s[e.dataConditionalColumn]<e.dataConditionalComparate);break;case">":d=r.filter(s=>s[e.dataConditionalColumn]>e.dataConditionalComparate);break;case"<=":d=r.filter(s=>s[e.dataConditionalColumn]<=e.dataConditionalComparate);break;case">=":d=r.filter(s=>s[e.dataConditionalColumn]>=e.dataConditionalComparate);break;case"=":isNaN(Number(e.dataConditionalComparate))?d=r.filter(s=>String(s[e.dataConditionalColumn])===e.dataConditionalComparate):d=r.filter(s=>s[e.dataConditionalColumn]===e.dataConditionalComparate);break;case"≠":isNaN(Number(e.dataConditionalComparate))?d=r.filter(s=>String(s[e.dataConditionalColumn])!==e.dataConditionalComparate):d=r.filter(s=>s[e.dataConditionalColumn]!==e.dataConditionalComparate);break;default:d=[]}const l=d.length>0?d.map(s=>s[e.dataColumn]):r.map(s=>s[e.dataColumn]),v=r.map(s=>s[e.dataDenomColumn]);let S=l.filter(s=>{let O=!1;return(Number(s)||Number.isFinite(Number(s)))&&(O=!0),O}).map(Number),_=v.filter(s=>{let O=!1;return(Number(s)||Number.isFinite(Number(s)))&&(O=!0),O}).map(Number),J="";J={[L]:String(S.length),[q]:String(D(ee(S),e.roundToPlace)),[U]:String(D(ae(S),e.roundToPlace)),[$]:D(te(S).toString(),e.roundToPlace),[k]:Math.max(...S).toString(),[B]:Math.min(...S).toString(),[G]:oe(S).join(", ")}[e.dataFunction];let z=null;const Te={[L]:String(_.length),[q]:String(D(ee(_),e.roundToPlace)),[U]:String(D(ae(_),e.roundToPlace)),[$]:D(te(_).toString(),e.roundToPlace),[k]:Math.max(..._).toString(),[B]:Math.min(..._).toString(),[G]:oe(_).join(", ")};return e.customDenom&&e.dataDenomColumn&&e.dataDenomFunction?z=Te[e.dataDenomFunction]:z=e.dataDenom>0?e.dataDenom:100,D(J/z*100,e.roundToPlace)},o=()=>e.nodeWidth*10+e.nodeSpacer*9,m=c();let p=parseInt(e.nodeWidth,10),C=parseInt(e.nodeSpacer,10),N=ea(m),x=m;const W=R.useCallback(()=>{var d;let r=[];for(let l=0;l<100;l++){let v={shape:e.shape,x:se(e.shape,"x",l,p,C),y:se(e.shape,"y",l,p,C),color:(d=je[e.theme])==null?void 0:d.primary,opacity:l+1>100-Math.round(m)?1:.35};r.unshift(v)}return r.map((l,v)=>l.shape==="square"?t(Ke,{className:"cove-waffle-chart__node",style:{transition:I(v,N,x)+"fill 200ms ease 0s",fillOpacity:l.opacity},x:l.x,y:l.y,width:p,height:p,fill:l.color},v):l.shape==="person"?t("path",{style:{transform:`translateX(${l.x+p/4}px) translateY(${l.y}px) scale(${p/20})`,transition:I(v,N,x)+"fill 200ms ease 0s",fillOpacity:l.opacity},fill:l.color,fillOpacity:l.opacity,d:`M3.75,0a2.5,2.5,0,1,1-2.5,2.5A2.5,2.5,0,0,1,3.75,0M5.625,5.625H5.18125a3.433,3.433,0,0,1-2.8625,0H1.875A1.875,1.875,
                          0,0,0,0,7.5v5.3125a.9375.9375,0,0,0,.9375.9375h.625v5.3125A.9375.9375,0,0,0,2.5,20H5a.9375.9375,0,0,0,
                          .9375-.9375V13.75h.625A.9375.9375,0,0,0,7.5,12.8125V7.5A1.875,1.875,0,0,0,5.625,5.625Z`},v):t(Ze,{className:"cove-waffle-chart__node",style:{transition:I(v,N,x)+"fill 200ms ease 0s",fillOpacity:l.opacity},cx:l.x,cy:l.y,r:p/2,fill:l.color,"data-step":v},v))},[e.shape,e.theme,m,N,x,C,p]);let f=e.fontSize?{fontSize:e.fontSize+"px"}:null;return u(E,{children:[!n&&t(E,{children:u("div",{className:`cove-waffle-chart__container${e.orientation==="vertical"?" cove-waffle-chart__container--verical":""}${e.overallFontSize?" font-"+e.overallFontSize:""}`,children:[t("div",{className:"cove-waffle-chart__visualization",style:{width:o()},children:t("svg",{width:o(),height:o(),children:t(xe,{children:W()})})}),(m||e.content)&&u("div",{className:"cove-waffle-chart__data",children:[m&&u("div",{className:"cove-waffle-chart__data--primary",style:f,children:[e.prefix?e.prefix:null,m,e.suffix?e.suffix:null]}),t("div",{className:"cove-waffle-chart__data--text",children:ie(e.content)})]})]})}),e.subtext&&t("div",{className:"cove-waffle-chart__subtext",children:ie(e.subtext)})]})};ye.__docgenInfo={description:"",methods:[],displayName:"WaffleChart"};const Fe=({config:a,configUrl:i,setConfig:e,isWizard:n})=>t(Re,{component:"CdcWaffleChart",children:t(Pe,{configObj:a,configUrl:i,defaults:ze,children:t(Ee,{EditorPanels:De,isWizard:n,children:t(Ae,{className:"cove-waffle-chart",children:t(ye,{})})})})}),M=Fe;Fe.__docgenInfo={description:"",methods:[],displayName:"CdcWaffleChart"};M.displayName="WaffleChart";const Ra={title:"Visualizations/Waffle Chart",component:M,parameters:{options:{isToolshown:!0}}};M.defaultProps={orientation:"horizontal",overallFontSize:"medium",invalidComparate:!1,customDenom:!1,dataDenom:100,suffix:"%",roundToPlace:0,shape:"circle",nodeWidth:10,nodeSpacer:2,theme:"blue"};const j=a=>t(M,{configObj:{...a}}),F=j.bind({});F.args={shape:"square",title:"Overdose Mortality Rates",content:"of overdoses resulted in death.",subtext:"This data is an example and does not reflect actual averages",orientation:"horizontal",data:[{"Resulted in Death":250,"Number of Overdoses":600,state:"Alabama",Year:"2010"},{"Resulted in Death":16,"Number of Overdoses":80,state:"Alaska",Year:"2008"},{"Resulted in Death":19,"Number of Overdoses":100,state:"Alaska",Year:"2010"},{"Resulted in Death":93,"Number of Overdoses":400,state:"Alaska",Year:"2012"},{"Resulted in Death":82,"Number of Overdoses":400,state:"Arizona",Year:"2010"}],filters:[],fontSize:null,overallFontSize:"medium",dataColumn:"Resulted in Death",dataFunction:"Sum",dataConditionalColumn:"",dataConditionalOperator:null,dataConditionalComparate:"",customDenom:!0,dataDenom:null,dataDenomColumn:"Number of Overdoses",dataDenomFunction:"Sum",prefix:"",suffix:"%",roundToPlace:0,nodeWidth:10,nodeSpacer:2,theme:"blue"};const T=j.bind({});T.args={shape:"circle",title:"5 Day Pollen Count Average",content:"Oak, Cedar/Juniper and Hackberry",subtext:"This data is an example and does not reflect actual averages",data:[{"Pollen Count":6.3},{"Pollen Count":8.1},{"Pollen Count":7.4},{"Pollen Count":5.1},{"Pollen Count":6.9}],dataColumn:"Pollen Count",dataFunction:"Mean (Average)",customDenom:!0,dataDenom:10,suffix:" - Medium-high",nodeWidth:15,theme:"orange"};const A=j.bind({});A.args={shape:"person",title:"COVID-19 Positive Test Rates",content:"Daily positive test rate per 100k",subtext:"This data is an example and does not reflect actual averages",data:[{"Positive Test":2100}],dataColumn:"Positive Test",dataFunction:"Sum",customDenom:!0,dataDenom:1e5,suffix:"%",roundToPlace:1,nodeWidth:22,nodeSpacer:2,theme:"green"};const P=j.bind({});P.args={shape:"square",title:"Insured Rates for Georgia",content:"of families are under active health insurance in the state of Georgia; either through the healthcare marketplace, or through provider",subtext:"This data is an example and does not reflect actual averages",data:[{Coverage:68.4}],dataColumn:"Coverage",dataFunction:"Sum",customDenom:!1,suffix:"%",nodeWidth:25,nodeSpacer:2,theme:"cyan"};var ce,de,me;F.parameters={...F.parameters,docs:{...(ce=F.parameters)==null?void 0:ce.docs,source:{originalSource:`args => <CdcWaffleChart configObj={{
  ...args
}} />`,...(me=(de=F.parameters)==null?void 0:de.docs)==null?void 0:me.source}}};var ue,fe,pe;T.parameters={...T.parameters,docs:{...(ue=T.parameters)==null?void 0:ue.docs,source:{originalSource:`args => <CdcWaffleChart configObj={{
  ...args
}} />`,...(pe=(fe=T.parameters)==null?void 0:fe.docs)==null?void 0:pe.source}}};var he,ge,Ce;A.parameters={...A.parameters,docs:{...(he=A.parameters)==null?void 0:he.docs,source:{originalSource:`args => <CdcWaffleChart configObj={{
  ...args
}} />`,...(Ce=(ge=A.parameters)==null?void 0:ge.docs)==null?void 0:Ce.source}}};var ve,be,Ne;P.parameters={...P.parameters,docs:{...(ve=P.parameters)==null?void 0:ve.docs,source:{originalSource:`args => <CdcWaffleChart configObj={{
  ...args
}} />`,...(Ne=(be=P.parameters)==null?void 0:be.docs)==null?void 0:Ne.source}}};const Ea=["Primary","Circle","Person","Square"];export{T as Circle,A as Person,F as Primary,P as Square,Ea as __namedExportsOrder,Ra as default};
//# sourceMappingURL=WaffleChart.stories-7007fb9d.js.map
