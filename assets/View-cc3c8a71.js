import{j as o,a as e,F as b}from"./jsx-runtime-68f49b4e.js";import{r as i}from"./index-f1f749bf.js";import{p as G}from"./index-4d501b15.js";import{u as T}from"./globalStore-3225bb68.js";import{u as J}from"./configStore-d2c2b356.js";import{A as W}from"./Accordion-b2b36620.js";import{B as U}from"./Button-d396fa8c.js";import{I as C}from"./Icon-36492f7a.js";import{S as H}from"./SplashError-ea51d080.js";import{O as S}from"./Overlay-5e2568bd.js";/* empty css             */const h=["360","480","768","960","1170","1280"];const x=({EditorPanels:f,children:v,setParentConfig:l})=>{var A;const{os:_}=T(),{config:r,setConfig:w,updateConfig:d}=J(),{missingRequiredSections:N}=r,[a,R]=i.useState(!0),[y,u]=i.useState(!1),[s,O]=i.useState(null),[g,z]=i.useState(!1),[p,E]=i.useState(!1),[M,B]=i.useState({}),c=i.useRef(null),P=i.useRef(null),k=i.useRef(null),I=()=>{let t=JSON.parse(JSON.stringify(r));return delete t.newViz,t};i.useEffect(()=>(document.addEventListener("keydown",D),()=>document.removeEventListener("keydown",D)),[]),i.useEffect(()=>u(!!s),[s]),i.useEffect(()=>{N===!0&&E(!0),N===!1&&p===!0&&E(!1)},[N,p]),i.useEffect(()=>{p===!1&&d(I())},[p]),i.useEffect(()=>{l&&l(I())},[r]);const V=i.useCallback(t=>O(m=>m!==t?t:null),[s]),D=t=>{if(t.code==="Escape"&&R(n=>!n),_==="MacOS"?t.metaKey:t.altKey){t.preventDefault();const n=t.key-1;n<=h.length&&V(h[n])}else P.current.contains(document.activeElement)||(t.code==="KeyG"&&u(n=>!n),t.code==="KeyR"&&K())};i.useEffect(()=>{if(!k.current)return;let t=new ResizeObserver(m=>{for(let n of m){let{width:F,height:L}=n.contentRect;B({width:F,height:L})}});return t.observe(k.current),()=>{t&&(t.disconnect(),t=null)}},[]);const $=()=>R(!a),j=()=>{const t=()=>E(!1);return e("section",{className:"cove-splash__waiting",children:o("section",{className:"cove-splash__waiting__container",children:[e("h3",{children:"Finish Configuring"}),e("p",{children:"Set all required options to the left and confirm below to display the preview."}),e(U,{className:"mt-2 mx-auto",disabled:N,onClick:()=>t(),children:"I'm Done"})]})})},K=i.useCallback(()=>{if(!g&&c.current){O(null),z(!0),u(!1),c.current.style.transition="transform 800ms cubic-bezier(0.16, 1, 0.3, 1)",c.current.style.transform="rotate(-360deg)";const t=setTimeout(()=>{z(!1),c.current.style.transition=null,c.current.style.transform="rotate(0deg)",c.current.style.transform=null},400);return()=>clearTimeout(t)}},[g]);return o("div",{className:`cove-editor${a?" panel-shown":""}`,children:[e("button",{className:"cove-editor__toggle"+(a?"":" collapsed"),title:a?"Collapse Editor":"Expand Editor",onClick:$}),o("section",{className:"cove-editor__panel",tabIndex:0,ref:P,children:[e("h2",{className:"cove-editor__panel-heading","aria-level":"2",role:"heading",children:"Configure Chart"}),e("div",{className:"cove-editor__panel-container",children:e("section",{className:"cove-editor__panel-config",children:e(W,{children:f().props.children.map(t=>t)})})})]}),o("div",{className:"cove-editor__content","data-grid":y||null,children:[p&&e(j,{}),e("div",{className:"cove-editor__content-wrap--x",style:s?{maxWidth:s+"px",minWidth:"unset"}:null,children:o("div",{className:"cove-editor__content-wrap--y",children:[e("div",{className:"cove-editor-utils__breakpoints--px",children:y&&a&&o(b,{children:[Math.round(M.width),e("span",{className:"mx-1",style:{fontSize:"0.675rem"},children:"âœ•"}),Math.round(M.height)]})}),e("div",{className:"cove-editor__grid-caret--top",ref:k,children:o("div",{className:"cove-editor__grid-caret--bottom",children:[(r==null?void 0:r.newViz)===void 0&&(r==null?void 0:r.runtime)&&((A=r==null?void 0:r.runtime)==null?void 0:A.editorErrorMessage)&&e(H,{title:"Error With Configuration",message:r.runtime.editorErrorMessage}),v]})})]})}),o("div",{className:"cove-editor-utils__hotkeys",children:[o("div",{className:"cove-editor-utils__hotkeys--left",children:[e("p",{className:a?"hotkey--active":null,children:"Editor"}),e("p",{className:y?"hotkey--active":null,children:"Grid"}),e("p",{className:g?"hotkey--active":null,children:"Reset"}),e("p",{className:s?"hotkey--active":null,children:"View"})]}),o("div",{className:"cove-editor-utils__hotkeys--right",children:[e("p",{className:a?"hotkey--active":null,children:"esc"}),e("p",{className:y?"hotkey--active":null,children:"G"}),e("p",{className:g?"hotkey--active":null,children:"R"}),o("p",{className:s?"hotkey--active":null,children:[_==="MacOS"?e(C,{style:{marginRight:"0.25rem"},display:"command",size:12}):"Alt"," + ",s?h.indexOf(s)+1:`[1 - ${h.length}]`]})]})]}),e("div",{className:"cove-editor-utils__breakpoints",children:o("ul",{className:`cove-editor-utils__breakpoints-list${s?" has-active":""}`,children:[e("li",{className:"cove-editor-utils__breakpoints-item",onClick:()=>{u(t=>!t)},children:e("div",{className:"cove-editor-utils__breakpoints-grid",children:e(C,{display:"squareGrid"})})}),h.map((t,m)=>o("li",{className:`cove-editor-utils__breakpoints-item${s===t?" active":""}`,onClick:()=>V(t),children:[t,"px"]},m)),e("li",{className:"cove-editor-utils__breakpoints-item",onClick:()=>{K()},children:e("div",{className:"cove-editor-utils__breakpoints-reset",ref:c,children:e(C,{display:"rotateLeft"})})})]})})]})]})};x.__docgenInfo={description:"",methods:[],displayName:"Editor"};const q=({EditorPanels:f,isWizard:v,children:l})=>{const{viewMode:_,setViewMode:r}=T();i.useEffect(()=>window.location.href.includes("editor=true")?r(v?"wizard":"editor"):()=>{},[v,r]);const w=i.useRef();let d=e(b,{children:"No views match the provided view mode."});switch(_){case"component":d=o("div",{className:"cove",ref:w,children:[l,e(S,{})]});break;case"editor":d=o("div",{className:"cove",ref:w,children:[e(x,{EditorPanels:f,children:l}),e(S,{})]});break;case"wizard":d=o("div",{className:"cove",ref:w,children:[e(x,{EditorPanels:f,children:l}),e(S,{})]});break}return e(b,{children:d})};q.propTypes={viewMode:G.oneOf(["component","editor","wizard"]),EditorPanels:G.func};q.__docgenInfo={description:"",methods:[],displayName:"View",props:{viewMode:{type:{name:"enum",value:[{value:"'component'",computed:!1},{value:"'editor'",computed:!1},{value:"'wizard'",computed:!1}]},required:!1,description:"**[External]** Defined in the `globalStore` - Sets the current view of the user, depending on the environment settings detected"},EditorPanels:{type:{name:"func"},required:!1,description:"The React component export of the EditorPanels for the component"}}};export{q as V};
//# sourceMappingURL=View-cc3c8a71.js.map
