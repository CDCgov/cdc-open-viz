import{j as h,a as y}from"./jsx-runtime-f14b59b8.js";import{r as u}from"./index-18f6e4ac.js";import{h as te}from"./index-4337b338.js";import{p as E}from"./index-780fc102.js";import{I as $}from"./Icon-ce256261.js";import{T as S}from"./Tooltip-8b5fc730.js";function W(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function T(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?W(Object(t),true).forEach(function(r){s(e,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function w(e,n){if(!(e instanceof n)){throw new TypeError("Cannot call a class as a function")}}function L(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(e,r.key,r)}}function I(e,n,t){if(n)L(e.prototype,n);if(t)L(e,t);Object.defineProperty(e,"prototype",{writable:false});return e}function s(e,n,t){if(n in e){Object.defineProperty(e,n,{value:t,enumerable:true,configurable:true,writable:true})}else{e[n]=t}return e}function v(){v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t){if(Object.prototype.hasOwnProperty.call(t,r)){e[r]=t[r]}}}return e};return v.apply(this,arguments)}function R(e,n){if(typeof n!=="function"&&n!==null){throw new TypeError("Super expression must either be null or a function")}e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:true,configurable:true}});Object.defineProperty(e,"prototype",{writable:false});if(n)j(e,n)}function A(e){A=Object.setPrototypeOf?Object.getPrototypeOf:function n(t){return t.__proto__||Object.getPrototypeOf(t)};return A(e)}function j(e,n){j=Object.setPrototypeOf||function t(r,a){r.__proto__=a;return r};return j(e,n)}function ne(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}));return true}catch(e){return false}}function re(e,n){if(e==null)return{};var t={};var r=Object.keys(e);var a,o;for(o=0;o<r.length;o++){a=r[o];if(n.indexOf(a)>=0)continue;t[a]=e[a]}return t}function P(e,n){if(e==null)return{};var t=re(e,n);var r,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++){r=o[a];if(n.indexOf(r)>=0)continue;if(!Object.prototype.propertyIsEnumerable.call(e,r))continue;t[r]=e[r]}}return t}function m(e){if(e===void 0){throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}return e}function ae(e,n){if(n&&(typeof n==="object"||typeof n==="function")){return n}else if(n!==void 0){throw new TypeError("Derived constructors may only return object or undefined")}return m(e)}function B(e){var n=ne();return function t(){var r=A(e),a;if(n){var o=A(this).constructor;a=Reflect.construct(r,arguments,o)}else{a=r.apply(this,arguments)}return ae(this,a)}}function oe(e,n){return de(e)||ue(e,n)||k(e,n)||pe()}function ie(e){return le(e)||ce(e)||k(e)||se()}function le(e){if(Array.isArray(e))return D(e)}function de(e){if(Array.isArray(e))return e}function ce(e){if(typeof Symbol!=="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ue(e,n){var t=e==null?null:typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(t==null)return;var r=[];var a=true;var o=false;var d,i;try{for(t=t.call(e);!(a=(d=t.next()).done);a=true){r.push(d.value);if(n&&r.length===n)break}}catch(c){o=true;i=c}finally{try{if(!a&&t["return"]!=null)t["return"]()}finally{if(o)throw i}}return r}function k(e,n){if(!e)return;if(typeof e==="string")return D(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);if(t==="Object"&&e.constructor)t=e.constructor.name;if(t==="Map"||t==="Set")return Array.from(e);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return D(e,n)}function D(e,n){if(n==null||n>e.length)n=e.length;for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function se(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function pe(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var fe=I(function e(n){var t=this;var r=n.expanded,a=r===void 0?[]:r,o=n.allowMultipleExpanded,d=o===void 0?false:o,i=n.allowZeroExpanded,c=i===void 0?false:i;w(this,e);s(this,"expanded",void 0);s(this,"allowMultipleExpanded",void 0);s(this,"allowZeroExpanded",void 0);s(this,"toggleExpanded",function(l){if(t.isItemDisabled(l)){return t}var p=t.isItemExpanded(l);if(!p){return t.augment({expanded:t.allowMultipleExpanded?[].concat(ie(t.expanded),[l]):[l]})}else{return t.augment({expanded:t.expanded.filter(function(f){return f!==l})})}});s(this,"isItemDisabled",function(l){var p=t.isItemExpanded(l);var f=t.expanded.length===1;return Boolean(p&&!t.allowZeroExpanded&&f)});s(this,"isItemExpanded",function(l){return t.expanded.indexOf(l)!==-1});s(this,"getPanelAttributes",function(l,p){var f=p!==null&&p!==void 0?p:t.isItemExpanded(l);return{role:t.allowMultipleExpanded?void 0:"region","aria-hidden":t.allowMultipleExpanded?!f:void 0,"aria-labelledby":t.getButtonId(l),id:t.getPanelId(l),hidden:f?void 0:true}});s(this,"getHeadingAttributes",function(){return{role:"heading"}});s(this,"getButtonAttributes",function(l,p){var f=p!==null&&p!==void 0?p:t.isItemExpanded(l);var b=t.isItemDisabled(l);return{id:t.getButtonId(l),"aria-disabled":b,"aria-expanded":f,"aria-controls":t.getPanelId(l),role:"button",tabIndex:0}});s(this,"getPanelId",function(l){return"accordion__panel-".concat(l)});s(this,"getButtonId",function(l){return"accordion__heading-".concat(l)});s(this,"augment",function(l){return new e(T({expanded:t.expanded,allowMultipleExpanded:t.allowMultipleExpanded,allowZeroExpanded:t.allowZeroExpanded},l))});this.expanded=a;this.allowMultipleExpanded=d;this.allowZeroExpanded=c});var U=u.createContext(null);var V=function(e){R(t,e);var n=B(t);function t(){var r;w(this,t);for(var a=arguments.length,o=new Array(a),d=0;d<a;d++){o[d]=arguments[d]}r=n.call.apply(n,[this].concat(o));s(m(r),"state",new fe({expanded:r.props.preExpanded,allowMultipleExpanded:r.props.allowMultipleExpanded,allowZeroExpanded:r.props.allowZeroExpanded}));s(m(r),"toggleExpanded",function(i){r.setState(function(c){return c.toggleExpanded(i)},function(){if(r.props.onChange){r.props.onChange(r.state.expanded)}})});s(m(r),"isItemDisabled",function(i){return r.state.isItemDisabled(i)});s(m(r),"isItemExpanded",function(i){return r.state.isItemExpanded(i)});s(m(r),"getPanelAttributes",function(i,c){return r.state.getPanelAttributes(i,c)});s(m(r),"getHeadingAttributes",function(){return r.state.getHeadingAttributes()});s(m(r),"getButtonAttributes",function(i,c){return r.state.getButtonAttributes(i,c)});return r}I(t,[{key:"render",value:function r(){var a=this.state,o=a.allowZeroExpanded,d=a.allowMultipleExpanded;return u.createElement(U.Provider,{value:{allowMultipleExpanded:d,allowZeroExpanded:o,toggleExpanded:this.toggleExpanded,isItemDisabled:this.isItemDisabled,isItemExpanded:this.isItemExpanded,getPanelAttributes:this.getPanelAttributes,getHeadingAttributes:this.getHeadingAttributes,getButtonAttributes:this.getButtonAttributes}},this.props.children||null)}}]);return t}(u.PureComponent);s(V,"defaultProps",{allowMultipleExpanded:false,allowZeroExpanded:false});var q=function(e){R(t,e);var n=B(t);function t(){var r;w(this,t);for(var a=arguments.length,o=new Array(a),d=0;d<a;d++){o[d]=arguments[d]}r=n.call.apply(n,[this].concat(o));s(m(r),"renderChildren",function(i){return i?r.props.children(i):null});return r}I(t,[{key:"render",value:function r(){return u.createElement(U.Consumer,null,this.renderChildren)}}]);return t}(u.PureComponent);var me=["className","allowMultipleExpanded","allowZeroExpanded","onChange","preExpanded"];var ve=function e(n){var t=n.className,r=t===void 0?"accordion":t,a=n.allowMultipleExpanded,o=n.allowZeroExpanded,d=n.onChange,i=n.preExpanded,c=P(n,me);return u.createElement(V,{preExpanded:i,allowMultipleExpanded:a,allowZeroExpanded:o,onChange:d},u.createElement("div",v({"data-accordion-component":"Accordion",className:r},c)))};var M;(function(e){e["Accordion"]="Accordion";e["AccordionItem"]="AccordionItem";e["AccordionItemButton"]="AccordionItemButton";e["AccordionItemHeading"]="AccordionItemHeading";e["AccordionItemPanel"]="AccordionItemPanel"})(M||(M={}));var F=M;var N=0;function ge(){var e=N;N=N+1;return"raa-".concat(e)}var he=u.useId||ge;var be=/[\u0009\u000a\u000c\u000d\u0020]/g;function x(e){if(e===""||be.test(e)){console.error('uuid must be a valid HTML5 id but was given "'.concat(e,'", ASCII whitespaces are forbidden'));return false}return true}var K=u.createContext(null);var Ee=function e(n){var t=n.children,r=n.uuid,a=n.accordionContext,o=n.dangerouslySetExpanded;var d=function c(){a.toggleExpanded(r)};var i=function c(l){var p=o!==null&&o!==void 0?o:l.isItemExpanded(r);var f=l.isItemDisabled(r);var b=l.getPanelAttributes(r,o);var Z=l.getHeadingAttributes(r);var C=l.getButtonAttributes(r,o);return u.createElement(K.Provider,{value:{uuid:r,expanded:p,disabled:f,toggleExpanded:d,panelAttributes:b,headingAttributes:Z,buttonAttributes:C}},t)};return u.createElement(q,null,i)};var xe=function e(n){return u.createElement(q,null,function(t){return u.createElement(Ee,v({},n,{accordionContext:t}))})};var O=function e(n){var t=n.children;var r=function a(o){return o?t(o):null};return u.createElement(K.Consumer,null,r)};var ye=["uuid","dangerouslySetExpanded","className","activeClassName"];var z=function e(n){var t=n.uuid,r=n.dangerouslySetExpanded,a=n.className,o=a===void 0?"accordion__item":a,d=n.activeClassName,i=P(n,ye);var c=u.useState(he()),l=oe(c,1),p=l[0];var f=t!==null&&t!==void 0?t:p;var b=function Z(C){var Y=C.expanded;var ee=Y&&d?d:o;return u.createElement("div",v({"data-accordion-component":"AccordionItem",className:ee},i))};x(f.toString());if(i.id){x(i.id)}return u.createElement(xe,{uuid:f,dangerouslySetExpanded:r},u.createElement(O,null,b))};z.displayName=F.AccordionItem;function G(e){return e&&(e.matches('[data-accordion-component="Accordion"]')?e:G(e.parentElement))}function _(e){var n=G(e);return n&&Array.from(n.querySelectorAll('[data-accordion-component="AccordionItemButton"]'))}function Ae(e){var n=_(e)||[];var t=n[0];if(t){t.focus()}}function we(e){var n=_(e)||[];var t=n[n.length-1];if(t){t.focus()}}function Ie(e){var n=_(e)||[];var t=n.indexOf(e);if(t!==-1){var r=n[t+1];if(r){r.focus()}}}function Pe(e){var n=_(e)||[];var t=n.indexOf(e);if(t!==-1){var r=n[t-1];if(r){r.focus()}}}var g={END:"End",ENTER:"Enter",HOME:"Home",SPACE:" ",SPACE_DEPRECATED:"Spacebar",UP:"ArrowUp",DOWN:"ArrowDown",LEFT:"ArrowLeft",RIGHT:"ArrowRight"};var Oe=["toggleExpanded","className"];var _e=function e(n){var t=n.toggleExpanded,r=n.className,a=r===void 0?"accordion__button":r,o=P(n,Oe);var d=function i(c){var l=c.key;if(l===g.ENTER||l===g.SPACE||l===g.SPACE_DEPRECATED){c.preventDefault();t()}if(c.target instanceof HTMLElement){switch(l){case g.HOME:{c.preventDefault();Ae(c.target);break}case g.END:{c.preventDefault();we(c.target);break}case g.LEFT:case g.UP:{c.preventDefault();Pe(c.target);break}case g.RIGHT:case g.DOWN:{c.preventDefault();Ie(c.target);break}}}};if(o.id){x(o.id)}return u.createElement("div",v({className:a},o,{role:"button",tabIndex:0,onClick:t,onKeyDown:d,"data-accordion-component":"AccordionItemButton"}))};var Ce=function e(n){return u.createElement(O,null,function(t){var r=t.toggleExpanded,a=t.buttonAttributes;return u.createElement(_e,v({toggleExpanded:r},n,a))})};var Se={className:"accordion__heading","aria-level":3};var Ne="AccordionItemButton may contain only one child element, which must be an instance of AccordionItemButton.\n\nFrom the WAI-ARIA spec (https://www.w3.org/TR/wai-aria-practices-1.1/#accordion):\n\n“The button element is the only element inside the heading element. That is, if there are other visually persistent elements, they are not included inside the heading element.”\n\n";var J=function(e){R(t,e);var n=B(t);function t(){var r;w(this,t);for(var a=arguments.length,o=new Array(a),d=0;d<a;d++){o[d]=arguments[d]}r=n.call.apply(n,[this].concat(o));s(m(r),"ref",void 0);s(m(r),"setRef",function(i){r.ref=i});return r}I(t,[{key:"componentDidUpdate",value:function r(){t.VALIDATE(this.ref)}},{key:"componentDidMount",value:function r(){t.VALIDATE(this.ref)}},{key:"render",value:function r(){return u.createElement("div",v({"data-accordion-component":"AccordionItemHeading"},this.props,{ref:this.setRef}))}}],[{key:"VALIDATE",value:function r(a){if(a===void 0){throw new Error("ref is undefined")}if(!(a.childElementCount===1&&a.firstElementChild&&a.firstElementChild.getAttribute("data-accordion-component")==="AccordionItemButton")){throw new Error(Ne)}}}]);return t}(u.PureComponent);s(J,"defaultProps",Se);var X=function e(n){return u.createElement(O,null,function(t){var r=t.headingAttributes;if(n.id){x(n.id)}return u.createElement(J,v({},n,r))})};X.displayName=F.AccordionItemHeading;var Te=["className","region","id"];var je=function e(n){var t=n.className,r=t===void 0?"accordion__panel":t,a=n.region,o=n.id,d=P(n,Te);var i=function c(l){var p=l.panelAttributes;if(o){x(o)}var f=T(T({},p),{},{"aria-labelledby":a?p["aria-labelledby"]:void 0});return u.createElement("div",v({"data-accordion-component":"AccordionItemPanel",className:r},d,f,{role:a?"region":void 0}))};return u.createElement(O,null,i)};const Q=()=>null;const H=({children:e})=>{const[n,t]=u.useState(e);u.useMemo(()=>{t(e)},[e]);const r=u.Children.toArray(n);const a=r.filter(i=>(i==null?void 0:i.type)===Q)||n;const o=h($,{className:"cove-icon--warning",display:"warningCircle",size:14});const d=i=>{return i===void 0||i===true};return h(ve,{allowZeroExpanded:true,children:a&&a.map((i,c)=>y(z,{className:"cove-accordion__item",style:d(i.props.showIf)?{}:{visibility:"hidden",display:"none"},children:[h(X,{className:"cove-accordion__heading",children:y(Ce,{className:"cove-accordion__button",children:[y("span",{className:"cove-accordion__button--text",children:[i.props.label,i.props.warnIf?o:null]}),i.props.tooltip?y(S,{position:"bottom",children:[h(S.Target,{children:h($,{display:"questionCircle",size:14})}),h(S.Content,{children:te(i.props.tooltip)})]}):null]})}),h(je,{className:"cove-accordion__panel",children:i.props.children})]},c))})};H.Section=Q;H.propTypes={warnIf:E.any,label:E.string,tooltip:E.oneOfType([E.string,E.object])};H.__docgenInfo={"description":"","methods":[{"name":"Section","docblock":null,"modifiers":["static"],"params":[],"returns":null}],"displayName":"Accordion","props":{"warnIf":{"type":{"name":"any"},"required":false,"description":"Show warning if supplied statement or value is truthy"},"label":{"type":{"name":"string"},"required":false,"description":"Title for the accordion label"},"tooltip":{"type":{"name":"union","value":[{"name":"string"},{"name":"object"}]},"required":false,"description":"Tooltip for the accordion label; JSX markup can also be supplied"}}};export{H as A};
//# sourceMappingURL=Accordion-2d0459fd.js.map
