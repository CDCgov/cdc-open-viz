{"version":3,"file":"InputToggle.stories-d06bc9cf.js","sources":["../../packages/core/components/input/InputToggle.jsx","../../packages/core/components/input/_stories/InputToggle.stories.mdx"],"sourcesContent":["import React, { useState, useEffect, memo, useRef } from 'react'\n\n// Third Party\nimport PropTypes from 'prop-types'\n\n// Hooks\nimport { useVisConfig } from '../../hooks/store/useVisConfig'\n\n// Helpers\nimport { getConfigKeyValue } from '../../helpers/configHelpers'\n\n// Components\nimport Label from '../element/Label'\n\n// Styles\nimport '../../styles/v2/components/input/index.scss'\n\nconst InputToggle = memo((\n  {\n    label,\n    labelPosition = 'right',\n    tooltip,\n    toggleType = 'flat',\n    size = 'small',\n    activeColor = '#005eaa',\n    stretch,\n    // required,\n\n    configField,\n    value: inlineValue,\n    className,\n    onClick,\n    ...attributes\n  }\n) => {\n  // Store Selectors\n  const { config, updateVisConfigField } = useVisConfig()\n\n  const [ value, setValue ] = useState(false)\n\n  const inputRef = useRef(null)\n\n  // Get initial value\n  const configFieldValue = configField && getConfigKeyValue(configField, config)\n\n  // Check initial value\n  // Valid value of 'false' could be returned, so checking undefined\n  const valueExistsOnConfig = Boolean(configFieldValue && typeof configFieldValue !== undefined)\n\n  // Set initial value\n  useEffect(() => {\n    if (valueExistsOnConfig) {\n      configFieldValue !== value && setValue(configFieldValue)\n    } else {\n      setValue(inlineValue)\n    }\n  }, [ valueExistsOnConfig ])\n\n  useEffect(() => {\n    if (configField && value !== configFieldValue)\n      updateVisConfigField(configField, value)\n  }, [ configField, value, updateVisConfigField ])\n\n  const onClickHandler = () => inputRef.current.click()\n\n  const onChangeHandler = (e) => {\n    setValue(value => !value)\n    onClick && onClick(e)\n  }\n\n  const generateWrapperClasses = () => {\n    const classList = []\n\n    // Root class\n    const root = 'cove-input__toggle-group'\n    classList.push(root)\n\n    // Stretch class\n    if (stretch) classList.push('cove-input__toggle-group--stretch')\n\n    // Props classes\n    if (className) classList.push(className)\n\n    return classList.join(' ')\n  }\n\n  const generateInputClasses = () => {\n    const classList = []\n\n    // Root class\n    const root = 'cove-input__toggle'\n    const suffixArr = {\n      small: '',\n      medium: '--medium',\n      large: '--large',\n      xlarge: '--xlarge'\n    }\n    classList.push(root + suffixArr[size])\n\n    // Type class\n    const typeArr = {\n      flat: 'cove-input__toggle--flat',\n      block: 'cove-input__toggle--block',\n      pill: 'cove-input__toggle--pill',\n      '3d': 'cove-input__toggle--3d'\n    }\n    classList.push(typeArr[toggleType] || '')\n\n    // Active class\n    if (value) classList.push('cove-input__toggle--active')\n\n    // Required class\n    // if (required && (value === undefined)) classList.push('cove-input--error')\n\n    return classList.join(' ')\n  }\n\n  const TooltipLabel = () => (\n    <div className=\"cove-input__toggle-group__label\">\n      <Label tooltip={tooltip} onClick={onClickHandler}>{label}</Label>\n    </div>\n  )\n\n  return (\n    <>\n      {label && labelPosition === 'top' &&\n        <TooltipLabel/>\n      }\n      <div className={generateWrapperClasses()} flow={labelPosition}>\n        {label && labelPosition === 'left' &&\n          <TooltipLabel/>\n        }\n        <div className={generateInputClasses()}\n          tabIndex={0}\n          onKeyUp={(e) => {\n            if (e.code === 'Enter' || e.code === 'NumpadEnter' || e.code === 'Space') onClickHandler()\n          }}\n          onClick={onClickHandler}>\n          <div className=\"cove-input__toggle-spacer\"/>\n          <div className=\"cove-input__toggle-button\"/>\n          <div className=\"cove-input__toggle-track\" style={value && activeColor ? { backgroundColor: activeColor } : null}/>\n          <input className=\"cove-input--hidden\" type=\"checkbox\" defaultChecked={value} onChange={(e) => onChangeHandler(e)} ref={inputRef} tabIndex={-1} readOnly/>\n        </div>\n        {label && labelPosition === 'right' &&\n          <TooltipLabel/>\n        }\n      </div>\n    </>\n  )\n})\n\nInputToggle.propTypes = {\n  /** Add label to the input field */\n  label: PropTypes.string,\n  /** Position the label relative to the toggle */\n  labelPosition: PropTypes.oneOf([ 'left', 'right', 'top' ]),\n  /** Add a tooltip to describe the toggle's usage; JSX markup can also be supplied */\n  tooltip: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object\n  ]),\n  /** Select the preferred display style of the toggle */\n  toggleType: PropTypes.oneOf([ 'flat', 'block', 'pill', '3d' ]),\n  /** Select the preferred size of the toggle */\n  size: PropTypes.oneOf([ 'small', 'medium', 'large', 'xlarge' ]),\n  /** Select the preferred color for the toggle when active */\n  activeColor: PropTypes.string,\n  /** Stretch the toggle and its label to fill the width of its container; Only available when label exists, and **labelPosition** is set to `left` or `right`. */\n  stretch: PropTypes.bool,\n  // /** Mark the toggle as required; will set error style while value is undefined */\n  // required: PropTypes.bool,\n  /** Current value of the input, usually the current config option value */\n  stateValue: PropTypes.bool\n}\n\nexport default InputToggle\n","import { Canvas, Meta, Story, ArgsTable } from '@storybook/blocks';\nimport InputToggle from '../InputToggle'\n\n<Meta\n  title=\"Components/Input/Toggle\"\n  name=\"Usage\"\n  component={InputToggle}\n  parameters={{ options: { isToolshown: true } }}\n/>\n\nexport const Template = ({ ...args }) => (\n  <InputToggle {...args} />\n)\n\n# Toggle Component\n<Canvas sourceState=\"shown\" withSource=\"open\">\n  <Story name=\"Example\"\n         args={{\n           label: 'Toggle Label',\n           labelPosition: 'top',\n           toggleType: 'flat',\n           tooltip: 'Example tooltip text...',\n           size: 'large',\n           activeColor: '#39569b',\n           value: true\n         }}>\n    {Template.bind({})}\n  </Story>\n</Canvas>\n\n<ArgsTable story=\"Example\"/>\n\n## Flat\n`toggleType=\"flat\"`\n<Canvas sourceState=\"none\">\n  <InputToggle activeColor=\"#46c3d1\" value={true}/>\n  <InputToggle size=\"medium\" activeColor=\"#46c3d1\" value={true}/>\n  <InputToggle size=\"large\" activeColor=\"#46c3d1\" value={true}/>\n  <InputToggle size=\"xlarge\" activeColor=\"#46c3d1\" value={true}/>\n</Canvas>\n\n<br/>\n\n## Block\n`toggleType=\"block\"`\n<Canvas sourceState=\"none\">\n  <InputToggle toggleType=\"block\" activeColor=\"#025eaa\" value={true}/>\n  <InputToggle size=\"medium\" toggleType=\"block\" activeColor=\"#025eaa\" value={true}/>\n  <InputToggle size=\"large\" toggleType=\"block\" activeColor=\"#025eaa\" value={true}/>\n  <InputToggle size=\"xlarge\" toggleType=\"block\" activeColor=\"#025eaa\" value={true}/>\n</Canvas>\n\n<br/>\n\n## Pill\n`toggleType=\"pill\"`\n<Canvas sourceState=\"none\">\n  <InputToggle toggleType=\"pill\" activeColor=\"#f22d70\" value={true}/>\n  <InputToggle size=\"medium\" toggleType=\"pill\" activeColor=\"#f22d70\" value={true}/>\n  <InputToggle size=\"large\" toggleType=\"pill\" activeColor=\"#f22d70\" value={true}/>\n  <InputToggle size=\"xlarge\" toggleType=\"pill\" activeColor=\"#f22d70\" value={true}/>\n</Canvas>\n\n<br/>\n\n## 3D\n`toggleType=\"3d\"`\n<Canvas sourceState=\"hidden\">\n  <InputToggle toggleType=\"3d\" value={true}/>\n  <InputToggle size=\"medium\" toggleType=\"3d\" value={true}/>\n  <InputToggle size=\"large\" toggleType=\"3d\" value={true}/>\n  <InputToggle size=\"xlarge\" toggleType=\"3d\" value={true}/>\n</Canvas>\n"],"names":["InputToggle","memo","label","labelPosition","tooltip","toggleType","size","activeColor","stretch","configField","inlineValue","className","onClick","attributes","config","updateVisConfigField","useVisConfig","value","setValue","useState","inputRef","useRef","configFieldValue","getConfigKeyValue","valueExistsOnConfig","useEffect","onClickHandler","onChangeHandler","e","generateWrapperClasses","classList","root","generateInputClasses","suffixArr","typeArr","TooltipLabel","jsx","Label","jsxs","Fragment","PropTypes","Template","args","_jsx","MDXContent","props","MDXLayout","_provideComponents","_createMdxContent","_components","_jsxs","_Fragment","Meta","Canvas","Story","ArgsTable","example","componentMeta","__namedExportsOrder"],"mappings":"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"}