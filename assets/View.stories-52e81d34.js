import{M as H,S as X,A as J}from"./index-b657acfb.js";import{a as o,j as e,F as N}from"./jsx-runtime-670450c2.js";import{r}from"./index-f1f749bf.js";import{p as g}from"./index-4d501b15.js";import{u as A,C as Q}from"./store-cacab8ef.js";import{u as Y}from"./useVisConfig-d44c6cfa.js";import{B as Z}from"./Button-f99151a1.js";import{I as M}from"./Icon-e6436e69.js";import{S as ee}from"./SplashError-3c188dda.js";import{O as q}from"./Overlay-b37bfdb5.js";/* empty css             */import{u as W}from"./index-4fb8b842.js";import"./iframe-a9b7e9f3.js";import"../sb-preview/runtime.mjs";import"./index-6e91e324.js";import"./index-d475d2ea.js";import"./index-c46f0053.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-d37d4223.js";import"./index-356e4a49.js";import"./LoadSpin-71c660ed.js";const E=["360","480","768","960","1170","1280"];const K=({editorPanels:a,children:m})=>{var I,T;const{config:i,updateVisConfig:s}=Y(),w=A(t=>t.os),[c,_]=r.useState(!0),[p,l]=r.useState(!1),[n,C]=r.useState(null),[h,y]=r.useState(!1),[f,b]=r.useState(!1),[D,G]=r.useState({}),v=r.useRef(null),k=r.useRef(null),R=r.useRef(null),j=()=>{let t=JSON.parse(JSON.stringify(i));return delete t.newViz,t};r.useEffect(()=>(document.addEventListener("keydown",V),()=>document.removeEventListener("keydown",V)),[]),r.useEffect(()=>l(!!n),[n]),r.useEffect(()=>{i.missingRequiredSections===!0&&b(!0),i.missingRequiredSections===!1&&f===!0&&b(!1)},[i.missingRequiredSections,f]),r.useEffect(()=>{f===!1&&s(j())},[f]);const O=r.useCallback(t=>C(u=>u!==t?t:null),[n]),V=t=>{t.code==="Escape"&&_(d=>!d);const u=w==="MacOS"?t.metaKey:t.altKey;if(u){let d=t.key;isNaN(d)||d<=E.length&&(t.preventDefault(),O(E[d-1]))}u||k.current&&!k.current.contains(document.activeElement)&&(t.code==="KeyG"&&l(d=>!d),t.code==="KeyR"&&P())};r.useEffect(()=>{if(!R.current)return;let t=new ResizeObserver(u=>{for(let d of u){let{width:$,height:F}=d.contentRect;G({width:$,height:F})}});return t.observe(R.current),()=>{t&&(t.disconnect(),t=null)}},[]);const B=()=>_(!c),U=()=>{const t=()=>b(!1);return e("section",{className:"cove-splash__waiting",children:o("section",{className:"cove-splash__waiting__container",children:[e("h3",{children:"Finish Configuring"}),e("p",{children:"Set all required options to the left and confirm below to display the preview."}),e(Z,{className:"mt-2 mx-auto",disabled:i.missingRequiredSections,onClick:()=>t(),children:"I'm Done"})]})})},P=r.useCallback(()=>{if(!h&&v.current){C(null),y(!0),l(!1),v.current.style.transition="transform 800ms cubic-bezier(0.16, 1, 0.3, 1)",v.current.style.transform="rotate(-360deg)";const t=setTimeout(()=>{y(!1),v.current.style.transition=null,v.current.style.transform="rotate(0deg)",v.current.style.transform=null},400);return()=>clearTimeout(t)}},[h]);let z=e(N,{children:m});return a&&(z=o("div",{className:`cove-editor${c?" panel-shown":""}`,children:[e("button",{className:"cove-editor__toggle"+(c?"":" collapsed"),title:c?"Collapse Editor":"Expand Editor",onClick:B}),o("section",{className:"cove-editor__panel",tabIndex:0,ref:k,children:[o("h2",{className:"cove-editor__panel-heading","aria-level":"2",role:"heading",children:["Configure ",i.type?Q.String.convertKebabToTitle(i.type):"Component"]}),e("div",{className:"cove-editor__panel-container",children:e("section",{className:"cove-editor__panel-config",children:a})})]}),o("div",{className:"cove-editor__content","data-grid":p||null,children:[f&&e(U,{}),e("div",{className:"cove-editor__content-wrap--x",style:n?{maxWidth:n+"px",minWidth:"unset"}:null,children:o("div",{className:"cove-editor__content-wrap--y",children:[e("div",{className:"cove-editor-utils__breakpoints--px",children:p&&c&&o(N,{children:[Math.round(D.width),e("span",{className:"mx-1",style:{fontSize:"0.675rem"},children:"âœ•"}),Math.round(D.height)]})}),e("div",{className:"cove-editor__grid-caret--top",ref:R,children:o("div",{className:"cove-editor__grid-caret--bottom",children:[(i==null?void 0:i.newViz)===void 0&&((I=i==null?void 0:i.runtime)==null?void 0:I.editorErrorMessage)&&((T=i==null?void 0:i.runtime)==null?void 0:T.editorErrorMessage.length)>0&&e(ee,{title:"Error With Configuration",message:i.runtime.editorErrorMessage}),m]})})]})}),o("div",{className:"cove-editor-utils__hotkeys",children:[o("div",{className:"cove-editor-utils__hotkeys--left",children:[e("p",{className:c?"hotkey--active":null,children:"Editor"}),e("p",{className:p?"hotkey--active":null,children:"Grid"}),e("p",{className:h?"hotkey--active":null,children:"Reset"}),e("p",{className:n?"hotkey--active":null,children:"View"})]}),o("div",{className:"cove-editor-utils__hotkeys--right",children:[e("p",{className:c?"hotkey--active":null,children:"esc"}),e("p",{className:p?"hotkey--active":null,children:"G"}),e("p",{className:h?"hotkey--active":null,children:"R"}),o("p",{className:n?"hotkey--active":null,children:[w==="MacOS"?e(M,{style:{marginRight:"0.25rem"},display:"command",size:12}):"Alt"," + ",n?E.indexOf(n)+1:`[1 - ${E.length}]`]})]})]}),e("div",{className:"cove-editor-utils__breakpoints",children:o("ul",{className:`cove-editor-utils__breakpoints-list${n?" has-active":""}`,children:[e("li",{className:"cove-editor-utils__breakpoints-item",onClick:()=>{l(t=>!t)},children:e("div",{className:"cove-editor-utils__breakpoints-grid",children:e(M,{display:"squareGrid"})})}),E.map((t,u)=>o("li",{className:`cove-editor-utils__breakpoints-item${n===t?" active":""}`,onClick:()=>O(t),children:[t,"px"]},u)),e("li",{className:"cove-editor-utils__breakpoints-item",onClick:()=>{P()},children:e("div",{className:"cove-editor-utils__breakpoints-reset",ref:v,children:e(M,{display:"rotateLeft"})})})]})})]})]})),z};K.__docgenInfo={description:"",methods:[],displayName:"Editor"};const S=({editorPanels:a,isPreview:m,children:i})=>{const{viewMode:s,setViewMode:w,setViewport:c}=A(),_=window.location.href;r.useEffect(()=>{const y=new ResizeObserver(f=>{const{width:b}=f[0].contentRect;c(b)});return y.observe(document.documentElement),()=>y.disconnect()},[]),r.useEffect(()=>(_.includes("editor=true")&&w("isEditor",!0),()=>{}),[_,w]);const{isEditor:p,isDashboard:l,isWizard:n}=s,C=r.useRef(),h=r.useCallback(()=>p&&!l&&!n||p&&l&&!m||n?e(K,{editorPanels:a,children:i}):e(N,{children:i}),[p,l,n,m]);return l||n?o(N,{children:[e(h,{}),e(q,{})]}):o("div",{className:"cove",ref:C,children:[e(h,{}),e(q,{})]})};S.propTypes={"viewMode.isEditor":g.bool,"viewMode.isDashboard":g.bool,"viewMode.isPreview":g.bool,"viewMode.isWizard":g.bool,EditorPanels:g.func};S.__docgenInfo={description:"",methods:[],displayName:"View",props:{"viewMode.isEditor":{type:{name:"bool"},required:!1,description:"**[External]** Defined in the `globalStore` - Sets the Editor view mode for the component"},"viewMode.isDashboard":{type:{name:"bool"},required:!1,description:"**[External]** Defined in the `globalStore` - Sets the Dashboard view mode for the component"},"viewMode.isPreview":{type:{name:"bool"},required:!1,description:"**[External]** Defined in the `globalStore` - Sets the Dashboard's Preview view mode for the component"},"viewMode.isWizard":{type:{name:"bool"},required:!1,description:"**[External]** Defined in the `globalStore` - Sets the Wizard view mode for the component"},EditorPanels:{type:{name:"func"},required:!1,description:"The React component export of the EditorPanels for the component"}}};const Ne=({...a})=>e(S,{...a});function te(a={}){const{wrapper:m}=Object.assign({},W(),a.components);return m?e(m,{...a,children:e(i,{})}):i();function i(){const s=Object.assign({h1:"h1",p:"p",ul:"ul",li:"li",code:"code"},W(),a.components);return o(N,{children:[e(H,{title:"Components/HOC/View",component:S}),`
`,e(s.h1,{children:"View Component"}),`
`,e(s.p,{children:"A special component that renders a layout based on the current view for the user. The view is changed, depending on the consumption of the component, or the current URL of the user:"}),`
`,o(s.ul,{children:[`
`,o(s.li,{children:["If a COVE component is loaded on its own, the view will be set to ",e(s.code,{children:"component"}),". In this mode, the component displays as normal, and no interactive options are available. This is the default view."]}),`
`,o(s.li,{children:["If the URL contains ",e(s.code,{children:"?editor=true"}),", the view will be set to ",e(s.code,{children:"editor"}),". In this mode, the EditorPanels for an individual component will be accessible, and a special interactive screen is available for previewing the component with breakpoints."]}),`
`,o(s.li,{children:["When accessing a component through the Wizard, the view is set to ",e(s.code,{children:"wizard"}),". In this mode, the EditorPanels and interactive breakpoint previews are available, regardless of the URL parameters."]}),`
`]}),`
`,e(X,{name:"Example"}),`
`,e(J,{story:"Example"})]})}}const L={};L.storyName="Example";L.parameters={storySource:{source:"{}"}};const x={title:"Components/HOC/View",component:S,tags:["stories-mdx"],includeStories:["example"]};x.parameters=x.parameters||{};x.parameters.docs={...x.parameters.docs||{},page:te};const Se=["Template","example"];export{Ne as Template,Se as __namedExportsOrder,x as default,L as example};
//# sourceMappingURL=View.stories-52e81d34.js.map
