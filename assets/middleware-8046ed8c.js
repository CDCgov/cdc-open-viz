import{r as T}from"./index-f1f749bf.js";import{g as I}from"./_commonjsHelpers-042e6b4d.js";const j=t=>{let e;const o=new Set,s=(d,h)=>{const r=typeof d=="function"?d(e):d;if(!Object.is(r,e)){const f=e;e=h??typeof r!="object"?r:Object.assign({},e,r),o.forEach(p=>p(e,f))}},n=()=>e,i={setState:s,getState:n,subscribe:d=>(o.add(d),()=>o.delete(d)),destroy:()=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&console.warn("[DEPRECATED] The destroy method will be unsupported in the future version. You should use unsubscribe function returned by subscribe. Everything will be garbage collected if store is garbage collected."),o.clear()}};return e=t(s,n,i),i},M=t=>t?j(t):j;var b={},V={get exports(){return b},set exports(t){b=t}},A={},x={},U={get exports(){return x},set exports(t){x=t}},P={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m=T;function k(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var L=typeof Object.is=="function"?Object.is:k,N=m.useState,$=m.useEffect,J=m.useLayoutEffect,B=m.useDebugValue;function z(t,e){var o=e(),s=N({inst:{value:o,getSnapshot:e}}),n=s[0].inst,l=s[1];return J(function(){n.value=o,n.getSnapshot=e,_(n)&&l({inst:n})},[t,o,e]),$(function(){return _(n)&&l({inst:n}),t(function(){_(n)&&l({inst:n})})},[t]),B(o),o}function _(t){var e=t.getSnapshot;t=t.value;try{var o=e();return!L(t,o)}catch{return!0}}function F(t,e){return e()}var W=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?F:z;P.useSyncExternalStore=m.useSyncExternalStore!==void 0?m.useSyncExternalStore:W;(function(t){t.exports=P})(U);/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O=T,q=x;function X(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var G=typeof Object.is=="function"?Object.is:X,H=q.useSyncExternalStore,K=O.useRef,Y=O.useEffect,Q=O.useMemo,Z=O.useDebugValue;A.useSyncExternalStoreWithSelector=function(t,e,o,s,n){var l=K(null);if(l.current===null){var E={hasValue:!1,value:null};l.current=E}else E=l.current;l=Q(function(){function d(a){if(!h){if(h=!0,r=a,a=s(a),n!==void 0&&E.hasValue){var S=E.value;if(n(S,a))return f=S}return f=a}if(S=f,G(r,a))return S;var c=s(a);return n!==void 0&&n(S,c)?S:(r=a,f=c)}var h=!1,r,f,p=o===void 0?null:o;return[function(){return d(e())},p===null?void 0:function(){return d(p())}]},[e,o,s,n]);var i=H(t,l[0],l[1]);return Y(function(){E.hasValue=!0,E.value=i},[i]),Z(i),i};(function(t){t.exports=A})(V);const tt=I(b),{useSyncExternalStoreWithSelector:et}=tt;function nt(t,e=t.getState,o){const s=et(t.subscribe,t.getState,t.getServerState||t.getState,e,o);return T.useDebugValue(s),s}const C=t=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&typeof t!="function"&&console.warn('[DEPRECATED] Passing a vanilla store will be unsupported in the future version. Please use `import { useStore } from "zustand"` to use the vanilla store in React.');const e=typeof t=="function"?M(t):t,o=(s,n)=>nt(e,s,n);return Object.assign(o,e),o},ut=t=>t?C(t):C,R=new Map,g=t=>{const e=R.get(t);return e?Object.fromEntries(Object.entries(e.stores).map(([o,s])=>[o,s.getState()])):{}},ot=(t,e,o)=>{if(t===void 0)return{type:"untracked",connection:e.connect(o)};const s=R.get(o.name);if(s)return{type:"tracked",store:t,...s};const n={connection:e.connect(o),stores:{}};return R.set(o.name,n),{type:"tracked",store:t,...n}},rt=(t,e={})=>(o,s,n)=>{const{enabled:l,anonymousActionType:E,store:i,...d}=e;let h;try{h=(l??({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!h)return({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&l&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),t(o,s,n);const{connection:r,...f}=ot(i,h,d);let p=!0;n.setState=(c,y,u)=>{const v=o(c,y);if(!p)return v;const D=u===void 0?{type:E||"anonymous"}:typeof u=="string"?{type:u}:u;return i===void 0?(r==null||r.send(D,s()),v):(r==null||r.send({...D,type:`${i}/${D.type}`},{...g(d.name),[i]:n.getState()}),v)};const a=(...c)=>{const y=p;p=!1,o(...c),p=y},S=t(n.setState,s,n);if(f.type==="untracked"?r==null||r.init(S):(f.stores[f.store]=n,r==null||r.init(Object.fromEntries(Object.entries(f.stores).map(([c,y])=>[c,c===f.store?S:y.getState()])))),n.dispatchFromDevtools&&typeof n.dispatch=="function"){let c=!1;const y=n.dispatch;n.dispatch=(...u)=>{({BASE_URL:"./",MODE:"production",DEV:!1,PROD:!0}&&"production")!=="production"&&u[0].type==="__setState"&&!c&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),c=!0),y(...u)}}return r.subscribe(c=>{var y;switch(c.type){case"ACTION":if(typeof c.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return w(c.payload,u=>{if(u.type==="__setState"){if(i===void 0){a(u.state);return}Object.keys(u.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const v=u.state[i];if(v==null)return;JSON.stringify(n.getState())!==JSON.stringify(v)&&a(v);return}n.dispatchFromDevtools&&typeof n.dispatch=="function"&&n.dispatch(u)});case"DISPATCH":switch(c.payload.type){case"RESET":return a(S),i===void 0?r==null?void 0:r.init(n.getState()):r==null?void 0:r.init(g(d.name));case"COMMIT":if(i===void 0){r==null||r.init(n.getState());return}return r==null?void 0:r.init(g(d.name));case"ROLLBACK":return w(c.state,u=>{if(i===void 0){a(u),r==null||r.init(n.getState());return}a(u[i]),r==null||r.init(g(d.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return w(c.state,u=>{if(i===void 0){a(u);return}JSON.stringify(n.getState())!==JSON.stringify(u[i])&&a(u[i])});case"IMPORT_STATE":{const{nextLiftedState:u}=c.payload,v=(y=u.computedStates.slice(-1)[0])==null?void 0:y.state;if(!v)return;a(i===void 0?v:v[i]),r==null||r.send(null,u);return}case"PAUSE_RECORDING":return p=!p}return}}),S},ct=rt,w=(t,e)=>{let o;try{o=JSON.parse(t)}catch(s){console.error("[zustand devtools middleware] Could not parse the received json",s)}o!==void 0&&e(o)};export{ut as c,ct as d};
//# sourceMappingURL=middleware-8046ed8c.js.map
